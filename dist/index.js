!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Danmu=e():t.Danmu=e()}(this,(function(){return d=[function(t,e,r){"use strict";var n,o=TypeError,i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch(t){i=null}function u(){throw new o}var a=i?function(){try{return u}catch(t){try{return i(arguments,"callee").get}catch(t){return u}}}():u,c=r(5)(),f=Object.getPrototypeOf||function(t){return t.__proto__},p=n,s="undefined"==typeof Uint8Array?n:f(Uint8Array),y={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":c?f([][Symbol.iterator]()):n,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":n,"%AsyncIteratorPrototype%":p&&c&&Symbol.asyncIterator?p[Symbol.asyncIterator]():n,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?n:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?n:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?n:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?n:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":n,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":n,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?n:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?n:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?n:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%JSONParse%":"object"==typeof JSON?JSON.parse:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?f((new Map)[Symbol.iterator]()):n,"%MapPrototype%":"undefined"==typeof Map?n:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%PromisePrototype%":"undefined"==typeof Promise?n:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?n:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?n:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?n:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?n:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?f((new Set)[Symbol.iterator]()):n,"%SetPrototype%":"undefined"==typeof Set?n:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":c?f(""[Symbol.iterator]()):n,"%StringPrototype%":String.prototype,"%Symbol%":c?Symbol:n,"%SymbolPrototype%":c?Symbol.prototype:n,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":s,"%TypedArrayPrototype%":s?s.prototype:n,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?n:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?n:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?n:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?n:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?n:WeakSet.prototype},l=r(4).call(Function.call,String.prototype.replace),b=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,d=/\\(\\)?/g;t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var r,n=(r=[],l(t,b,(function(t,e,n,o){r[r.length]=n?l(o,d,"$1"):e||t})),r),u=function(t,e){if(!(t in y))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===y[t]&&!e)throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!");return y[t]}("%"+(0<n.length?n[0]:"")+"%",e),a=1;a<n.length;a+=1)if(null!=u)if(i&&a+1>=n.length){var c=i(u,n[a]);if(!e&&!(n[a]in u))throw new o("base intrinsic for "+t+" exists, but the property is not available.");u=c?c.get||c.value:u[n[a]]}else u=u[n[a]];return u}},function(t,e,r){"use strict";var n=r(37);t.exports=function(t){return"symbol"==typeof t?"Symbol":n(t)}},function(t,e,r){"use strict";var n=r(0),o=r(36),i=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&i(t,".prototype.")?o(r):r}},function(t,e,r){"use strict";t.exports=function(t){return"string"==typeof t||"symbol"==typeof t}},function(t,e,r){"use strict";var n=r(31);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";(function(e){var n=e.Symbol,o=r(35);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}}).call(this,r(34))},function(t,e,r){"use strict";var n=r(0),o=r(2),i=n("%Reflect.apply%",!0)||o("%Function.prototype.apply%");t.exports=function(t,e,r){return i(t,e,2<arguments.length?r:[])}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(16),i=r(3),u=r(1);t.exports=function(t,e){if("Object"!==u(t))throw new n("Assertion failed: Type(O) is not Object");if(!i(e))throw new n("Assertion failed: IsPropertyKey(P) is not true, got "+o(e));return t[e]}},function(t,e,r){"use strict";t.exports=r(21)},function(t,e,r){"use strict";var n=r(4);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";var n=r(0)("%Array%"),o=!n.isArray&&r(2)("Object.prototype.toString");t.exports=n.isArray||function(t){return"[object Array]"===o(t)}},function(t,e,r){"use strict";t.exports=function(t){return!!t}},function(t,e){var r=this,n=new TextDecoder;e.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},e.toBytes=function(t){return"number"==typeof t?t.toString(16).padStart(8,"0").match(/.{1,2}/g).reverse().map((function(t){return parseInt(t,16)})):"".concat(t).split("").map((function(t){return t.charCodeAt(0)}))},e.readAsInt32=function(t){var e=r.readAsBigBytes(t,4);if(isNaN(e.length)||e.length<4)throw new Error("invalid argument bytes length");return r.toNumber(e)},e.readAsInt16=function(t){var e=r.readAsBigBytes(t,2);if(isNaN(e.length)||e.length<2)throw new Error("invalid argument bytes length");return r.toNumber(e)},e.readAsString=function(t){var e=t;if(0!==e[e.length-1])throw new Error("invalid format");var r=e.length-1,o=e.slice(0,r);return n.decode(o)},e.readAsBigBytes=function(t,e){return r.readBytes(t,e).reverse()},e.readBytes=function(t,e){if(!t.slice||isNaN(t.length))throw new Error("invalid argument bytes");return Array.from(t.slice(0,e))},e.toNumber=function(t){if(!(t instanceof Array))throw new Error("bigEndianBytes must be an Array");var e=t.reduce((function(t,e){return t+e.toString(16).padStart(2,"0")}),"");return parseInt(e,16)}},function(t,e,r){"use strict";function n(t,e,r,n){var o;e in t&&("function"!=typeof(o=n)||"[object Function]"!==a.call(o)||!n())||(p?f(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)}function o(t,e){var r=2<arguments.length?arguments[2]:{},o=i(e);u&&(o=c.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)n(t,o[a],e[o[a]],r[o[a]])}var i=r(29),u="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,c=Array.prototype.concat,f=Object.defineProperty,p=f&&function(){var t={};try{for(var e in f(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}();o.supportsDescriptors=!!p,t.exports=o},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t);return"[object Arguments]"===e||"[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Function]"===n.call(t.callee)}},function(t,e,r){"use strict";function n(t,e){var r=f(t);i(this,r,e)}var o=r(32),i=r(52),u=r(7),a=r(10),c=r(20),f=r(65),p=r(1),s="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");t.exports=function(t){c(t);var e={};if(s)return o(e,t,n);if(!a(t))throw new TypeError("this environment lacks native Symbols, and can not support non-Array iterables");return function(t,e){for(var r=0;r<e.length;++r){var n=e[r];if("Object"!==p(n))throw new TypeError("iterator returned a non-object; entry expected");var o=u(n,"0"),a=u(n,"1"),c=f(o);i(t,c,a)}}(e,t),e}},function(t,e,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,u=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,f=a&&c&&"function"==typeof c.get?c.get:null,p=a&&Set.prototype.forEach,s="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,y="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,l=Boolean.prototype.valueOf,b=Object.prototype.toString,d=Function.prototype.toString,m=String.prototype.match,v="function"==typeof BigInt?BigInt.prototype.valueOf:null,h=r(33).custom,g=h&&j(h)?h:null;function w(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function S(t){return"[object Array]"===x(t)}function j(t){return"[object Symbol]"===x(t)}t.exports=function t(e,r,n,o){var a=r||{};if(O(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(O(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!O(a,"customInspect")||a.customInspect;if("boolean"!=typeof c)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(O(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&0<a.indent))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return function t(e,r){if(e.length>r.maxStringLength){var n=e.length-r.maxStringLength,o="... "+n+" more character"+(1<n?"s":"");return t(e.slice(0,r.maxStringLength),r)+o}return w(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,E),"single",r)}(e,a);if("number"==typeof e)return 0===e?0<1/0/e?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var b=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),b<=n&&0<b&&"object"==typeof e)return S(e)?"[Array]":"[Object]";var h,A=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&0<t.indent))return null;r=Array(t.indent+1).join(" ")}return{base:r,prev:Array(e+1).join(r)}}(a,n);if(void 0===o)o=[];else if(0<=P(o,e))return"[Circular]";function F(e,r,i){if(r&&(o=o.slice()).push(r),i){var u={depth:a.depth};return O(a,"quoteStyle")&&(u.quoteStyle=a.quoteStyle),t(e,u,n+1,o)}return t(e,a,n+1,o)}if("function"==typeof e){var N=function(t){if(t.name)return t.name;var e=m.call(d.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e);return"[Function"+(N?": "+N:" (anonymous)")+"]"}if(j(e)){var B=Symbol.prototype.toString.call(e);return"object"==typeof e?I(B):B}if(function(t){return!(!t||"object"!=typeof t)&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)}(e)){for(var R="<"+String(e.nodeName).toLowerCase(),U=e.attributes||[],D=0;D<U.length;D++)R+=" "+U[D].name+"="+w((h=U[D].value,String(h).replace(/"/g,"&quot;")),"double",a);return R+=">",e.childNodes&&e.childNodes.length&&(R+="..."),R+"</"+String(e.nodeName).toLowerCase()+">"}if(S(e)){if(0===e.length)return"[]";var W=M(e,F);return A&&!function(t){for(var e=0;e<t.length;e++)if(0<=P(t[e],"\n"))return!1;return!0}(W)?"["+k(W,A)+"]":"[ "+W.join(", ")+" ]"}if("[object Error]"===x(e)){var $=M(e,F);return 0===$.length?"["+String(e)+"]":"{ ["+String(e)+"] "+$.join(", ")+" }"}if("object"==typeof e&&c){if(g&&"function"==typeof e[g])return e[g]();if("function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{f.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var C=[];return u.call(e,(function(t,r){C.push(F(r,e,!0)+" => "+F(t,e))})),T("Map",i.call(e),C,A)}if(function(t){if(!f||!t||"object"!=typeof t)return!1;try{f.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var q=[];return p.call(e,(function(t){q.push(F(t,e))})),T("Set",f.call(e),q,A)}if(function(t){if(!s||!t||"object"!=typeof t)return!1;try{s.call(t,s);try{y.call(t,y)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return _("WeakMap");if(function(t){if(!y||!t||"object"!=typeof t)return!1;try{y.call(t,y);try{s.call(t,s)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return _("WeakSet");if("[object Number]"===x(e))return I(F(Number(e)));if("[object BigInt]"===x(e))return I(F(v.call(e)));if("[object Boolean]"===x(e))return I(l.call(e));if("[object String]"===x(e))return I(F(String(e)));if("[object Date]"===x(e)||"[object RegExp]"===x(e))return String(e);var G=M(e,F);return 0===G.length?"{}":A?"{"+k(G,A)+"}":"{ "+G.join(", ")+" }"};var A=Object.prototype.hasOwnProperty||function(t){return t in this};function O(t,e){return A.call(t,e)}function x(t){return b.call(t)}function P(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function E(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+e.toString(16)}function I(t){return"Object("+t+")"}function _(t){return t+" { ? }"}function T(t,e,r,n){return t+" ("+e+") {"+(n?k(r,n):r.join(", "))+"}"}function k(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function M(t,e){var r,n=S(t),o=[];if(n){o.length=t.length;for(var i=0;i<t.length;i++)o[i]=O(t,i)?e(t[i],t):""}for(r in t)O(t,r)&&(n&&String(Number(r))===r&&r<t.length||(/[^\w$]/.test(r)?o.push(e(r,t)+": "+e(t[r],t)):o.push(r+": "+e(t[r],t))));return o}},function(t,e,r){"use strict";t.exports=Number.isNaN||function(t){return t!=t}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(19),i=r(8),u=r(3);t.exports=function(t,e){if(!u(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");var r=o(t,e);if(null!=r){if(!i(r))throw new n(e+"is not a function");return r}}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(3),i=r(44);t.exports=function(t,e){if(!o(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");return i(t)[e]}},function(t,e,r){"use strict";t.exports=r(45)},function(t,e,r){"use strict";var n,o,i=Function.prototype.toString,u="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof u&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get:function(){throw o}}),o={}}catch(t){u=null}else u=null;function a(t){try{var e=i.call(t);return c.test(e)}catch(t){return}}var c=/^\s*class\b/,f=Object.prototype.toString,p="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=u?function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{u(t,null,n)}catch(t){if(t!==o)return!1}return!a(t)}:function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(p)return function(t){try{return!a(t)&&(i.call(t),!0)}catch(t){return!1}}(t);if(a(t))return!1;var e=f.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,r){"use strict";var n=r(0),o=n("%TypeError%"),i=n("%SyntaxError%"),u=r(9),a={"Property Descriptor":function(t,e){if("Object"!==t(e))return!1;var r,n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(r in e)if(u(e,r)&&!n[r])return!1;var i=u(e,"[[Value]]"),a=u(e,"[[Get]]")||u(e,"[[Set]]");if(i&&a)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}};t.exports=function(t,e,r,n){var u=a[e];if("function"!=typeof u)throw new i("unknown record type: "+e);if(!u(t,n))throw new o(r+" must be a "+e)}},function(t,e,r){"use strict";var n=r(15);t.exports=function(){return"function"==typeof Object.fromEntries?Object.fromEntries:n}},function(t,e,r){t.exports=r(25)},function(t,e,r){function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=r(12),a=u.toBytes,c=u.readAsInt32,f=u.readAsString,p=r(26),s=r(27),y=r(28);function l(t){var e=t.roomId,r=t.wsApi,n=void 0===r?"wss://danmuproxy.douyu.com:8503/":r,o=t.keepAlive,i=void 0===o?4e4:o;this.roomId=e,this.wsApi=n,this.keepAlive=i,this.emitter=new p,this.wsInstance=void 0,this.timer=void 0}l.prototype.__serialize=function(t){if(!t||"object"!==i(t))throw new Error("payload must be an object");return Object.keys(t).map((function(e){var r="".concat(t[e]).replace("@","@A").replace("/","@S");return"".concat(e,"@=").concat(r,"/")})).join("")},l.prototype.__deserialize=function(t){if(t&&t.trim()){var e=t.split("/");return"/"===t[t.length-1]&&e.pop(),y(e.map((function(t){var e=t.indexOf("@=");return[t.substring(0,e),t.substring(e+2)].map((function(t){return t.replace(/@A/g,"@").replace(/@S/g,"/")}))})))}},l.prototype.__encode=function(t){var e=this.__serialize(t),r="".concat(e).length,o=a(r+9),i=a(e);return new Int8Array([].concat(n(o),n(o),[177,2,0,0],n(i),[0]))},l.prototype.__decode=function(t){try{var e=new Int8Array(t);if(c(e)!==c(e.slice(4)))throw new Error("invalid argument arrayBuffer");var r=f(e.slice(12));return this.__deserialize(r)}catch(e){this.emitter.emit("decodeError",t)}},l.prototype.__sendPacket=function(t){var e;this.wsInstance&&"function"==typeof this.wsInstance.send&&(e=this.__encode(t),this.wsInstance.send(e))},l.prototype.__getLoginReqPacket=function(){return{type:"loginreq",roomid:this.roomId}},l.prototype.__getKeepAlivePacket=function(){return{type:"mrkl"}},l.prototype.__getJoinGroupPacket=function(){return{type:"joingroup",rid:this.roomId,gid:-9999}},l.prototype.connect=function(){var t=this,e=s();this.wsInstance=new e(this.wsApi),this.wsInstance.binaryType="arraybuffer",this.wsInstance.onopen=function(e){t.__sendPacket(t.__getLoginReqPacket()),t.__sendPacket(t.__getJoinGroupPacket()),t.timer=setInterval((function(){t.__sendPacket(t.__getKeepAlivePacket())}),t.keepAlive),t.emitter.emit("connect",e)},this.wsInstance.onmessage=function(e){var r=e.data,n=t.__decode(r);n&&(t.emitter.emit("message",n),t.emitter.emit("rawData",r))},this.wsInstance.onclose=function(e){t.emitter.emit("disconnect",e)},this.wsInstance.onerror=function(e){t.emitter.emit("error",e)}},l.prototype.disconnect=function(){this.wsInstance&&this.wsInstance.close&&(clearInterval(this.timer),this.wsInstance.close())},l.prototype.on=function(t,e){this.emitter.on(t,e)},t.exports=l},function(t,e){function r(){this.eventMap={}}r.prototype.on=function(t,e){this.eventMap[t]||(this.eventMap[t]=[]),this.eventMap[t].push(e)},r.prototype.emit=function(t,e){this.eventMap[t]&&this.eventMap[t].forEach((function(t){t(e)}))},t.exports=r},function(module,exports,__webpack_require__){var _require=__webpack_require__(12),isBrowser=_require.isBrowser;module.exports=function getWebSocket(){return isBrowser()?window.WebSocket:eval("require")("ws")}},function(t,e,r){"use strict";var n=r(13),o=r(4),i=r(15),u=r(23),a=r(72),c=o.call(u());n(c,{getPolyfill:u,implementation:i,shim:a}),t.exports=c},function(t,e,r){"use strict";var n=Array.prototype.slice,o=r(14),i=Object.keys,u=i?function(t){return i(t)}:r(30),a=Object.keys;u.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?a(n.call(t)):a(t)}):Object.keys=u,Object.keys||u},t.exports=u},function(t,e,r){"use strict";var n,o,i,u,a,c,f,p,s,y,l;Object.keys||(n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=r(14),u=Object.prototype.propertyIsEnumerable,a=!u.call({toString:null},"toString"),c=u.call((function(){}),"prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(t){var e=t.constructor;return e&&e.prototype===t},s={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!s["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),l=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===o.call(t),u=i(t),s=e&&"[object String]"===o.call(t),l=[];if(!e&&!r&&!u)throw new TypeError("Object.keys called on a non-object");var b=c&&r;if(s&&0<t.length&&!n.call(t,0))for(var d=0;d<t.length;++d)l.push(String(d));if(u&&0<t.length)for(var m=0;m<t.length;++m)l.push(String(m));else for(var v in t)b&&"prototype"===v||!n.call(t,v)||l.push(String(v));if(a)for(var h=function(t){if("undefined"==typeof window||!y)return p(t);try{return p(t)}catch(t){return!1}}(t),g=0;g<f.length;++g)h&&"constructor"===f[g]||!n.call(t,f[g])||l.push(f[g]);return l}),t.exports=l},function(t,e,r){"use strict";var n=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,i,u=n.call(arguments,1),a=Math.max(0,e.length-u.length),c=[],f=0;f<a;f++)c.push("$"+f);return r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,u.concat(n.call(arguments)));return Object(o)===o?o:this}return e.apply(t,u.concat(n.call(arguments)))})),e.prototype&&((i=function(){}).prototype=e.prototype,r.prototype=new i,i.prototype=null),r}},function(t,e,r){"use strict";var n=r(16),o=r(0)("%TypeError%"),i=r(6),u=r(7),a=r(38),c=r(8),f=r(46),p=r(47),s=r(51),y=r(1);t.exports=function(t,e,r){if(!c(r))throw new o("Assertion failed: `adder` is not callable");if(null==e)throw new o("Assertion failed: `iterable` is present, and not nullish");for(var l=a(e);;){var b=p(l);if(!b)return t;var d=s(b);if("Object"!==y(d)){var m=new o("iterator next must return an Object, got "+n(d));return f(l,(function(){throw m}))}try{var v=u(d,"0"),h=u(d,"1");i(r,t,[v,h])}catch(t){return f(l,(function(){throw t}))}}}},function(t,e){},function(t,e){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e,r){"use strict";var n=r(4),o=r(0),i=o("%Function.prototype.apply%"),u=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||n.call(u,i);t.exports=function(){return a(n,u,arguments)},t.exports.apply=function(){return a(n,i,arguments)}},function(t,e,r){"use strict";t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(39),i=r(40),u=r(6),a=r(18),c=r(10),f=r(1);t.exports=function(t,e){var r=e;arguments.length<2&&(r=o({AdvanceStringIndex:i,GetMethod:a,IsArray:c,Type:f},t));var p=u(r,t);if("Object"!==f(p))throw new n("iterator must return an object");return p}},function(t,e,r){"use strict";var n=r(5)(),o=r(0),i=r(2),u=o("%Symbol.iterator%",!0),a=i("String.prototype.slice");t.exports=function(t,e){var r;return n?r=t.GetMethod(e,u):t.IsArray(e)?r=function(){var t=-1,e=this;return{next:function(){return{done:(t+=1)>=e.length,value:e[t]}}}}:"String"===t.Type(e)&&(r=function(){var r=0;return{next:function(){var n=t.AdvanceStringIndex(e,r,!0),o=a(e,r,n);return{done:(r=n)>e.length,value:o}}}}),r}},function(t,e,r){"use strict";var n=r(0),o=r(41),i=r(1),u=r(43),a=n("%TypeError%"),c=r(2)("String.prototype.charCodeAt");t.exports=function(t,e,r){if("String"!==i(t))throw new a("Assertion failed: `S` must be a String");if(!o(e)||e<0||u<e)throw new a("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if("Boolean"!==i(r))throw new a("Assertion failed: `unicode` must be a Boolean");if(!r)return e+1;if(t.length<=e+1)return e+1;var n=c(t,e);if(n<55296||56319<n)return e+1;var f=c(t,e+1);return f<56320||57343<f?e+1:e+2}},function(t,e,r){"use strict";var n=r(0)("%Math%"),o=n.floor,i=n.abs,u=r(17),a=r(42);t.exports=function(t){if("number"!=typeof t||u(t)||!a(t))return!1;var e=i(t);return o(e)===e}},function(t,e,r){"use strict";var n=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!n(t)&&t!==1/0&&t!==-1/0}},function(t,e,r){"use strict";var n=r(0),o=n("%Math%"),i=n("%Number%");t.exports=i.MAX_SAFE_INTEGER||o.pow(2,53)-1},function(t,e,r){"use strict";var n=r(0)("%Object%"),o=r(20);t.exports=function(t){return o(t),n(t)}},function(t,e,r){"use strict";var n=r(0)("%TypeError%");t.exports=function(t,e){if(null==t)throw new n(e||"Cannot call method on "+t);return t}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(6),i=r(18),u=r(8),a=r(1);t.exports=function(t,e){if("Object"!==a(t))throw new n("Assertion failed: Type(iterator) is not Object");if(!u(e))throw new n("Assertion failed: completion is not a thunk for a Completion Record");var r,c=e,f=i(t,"return");if(void 0===f)return c();try{var p=o(f,t,[])}catch(t){throw c(),c=null,t}if(r=c(),c=null,"Object"!==a(p))throw new n("iterator .return must return an object");return r}},function(t,e,r){"use strict";var n=r(48),o=r(49);t.exports=function(t){var e=o(t);return!0!==n(e)&&e}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(7),i=r(11),u=r(1);t.exports=function(t){if("Object"!==u(t))throw new n("Assertion failed: Type(iterResult) is not Object");return i(o(t,"done"))}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(50),i=r(1);t.exports=function(t,e){var r=o(t,"next",arguments.length<2?[]:[e]);if("Object"!==i(r))throw new n("iterator next must return an object");return r}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(2)("Array.prototype.slice"),i=r(6),u=r(19),a=r(3);t.exports=function(t,e){if(!a(e))throw new n("P must be a Property Key");var r=o(arguments,2),c=u(t,e);return i(c,t,r)}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(7),i=r(1);t.exports=function(t){if("Object"!==i(t))throw new n("Assertion failed: Type(iterResult) is not Object");return o(t,"value")}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(53),i=r(3),u=r(1);t.exports=function(t,e,r){if("Object"!==u(t))throw new n("Assertion failed: Type(O) is not Object");if(!i(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");var a=o(t,e,r);if(!a)throw new n("unable to create data property");return a}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(54),i=r(55),u=r(56),a=r(61),c=r(62),f=r(3),p=r(64),s=r(1);t.exports=function(t,e,r){if("Object"!==s(t))throw new n("Assertion failed: Type(O) is not Object");if(!f(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");var y=u(t,e),l=!y||c(t);return!(!(!y||y["[[Writable]]"]&&y["[[Configurable]]"])||!l)&&o(a,p,i,t,e,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":r,"[[Writable]]":!0})}},function(t,e,r){"use strict";var n=r(0)("%Object.defineProperty%",!0);if(n)try{n({},"a",{value:1})}catch(t){n=null}var o=r(2)("Object.prototype.propertyIsEnumerable");t.exports=function(t,e,r,i,u,a){if(n)return n(i,u,r(a)),!0;if(!t(a))return!1;if(!a["[[Configurable]]"]||!a["[[Writable]]"])return!1;if(u in i&&o(i,u)!==!!a["[[Enumerable]]"])return!1;var c=a["[[Value]]"];return i[u]=c,e(i[u],c)}},function(t,e,r){"use strict";var n=r(22),o=r(1);t.exports=function(t){if(void 0===t)return t;n(o,"Property Descriptor","Desc",t);var e={};return"[[Value]]"in t&&(e.value=t["[[Value]]"]),"[[Writable]]"in t&&(e.writable=t["[[Writable]]"]),"[[Get]]"in t&&(e.get=t["[[Get]]"]),"[[Set]]"in t&&(e.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(e.enumerable=t["[[Enumerable]]"]),"[[Configurable]]"in t&&(e.configurable=t["[[Configurable]]"]),e}},function(t,e,r){"use strict";var n=r(0),o=r(57),i=n("%TypeError%"),u=r(2)("Object.prototype.propertyIsEnumerable"),a=r(9),c=r(10),f=r(3),p=r(58),s=r(60),y=r(1);t.exports=function(t,e){if("Object"!==y(t))throw new i("Assertion failed: O must be an Object");if(!f(e))throw new i("Assertion failed: P must be a Property Key");if(a(t,e)){if(o)return s(o(t,e));var r=c(t)&&"length"===e,n=p(t)&&"lastIndex"===e;return{"[[Configurable]]":!(r||n),"[[Enumerable]]":u(t,e),"[[Value]]":t[e],"[[Writable]]":!0}}}},function(t,e,r){"use strict";var n=r(0)("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(t){n=null}t.exports=n},function(t,e,r){"use strict";var n=r(0)("%Symbol.match%",!0),o=r(59),i=r(11);t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(n){var e=t[n];if(void 0!==e)return i(e)}return o(t)}},function(t,e,r){"use strict";var n,o,i,u,a,c=r(5)()&&"symbol"==typeof Symbol.toStringTag;c&&(n=Function.call.bind(Object.prototype.hasOwnProperty),o=Function.call.bind(RegExp.prototype.exec),i={},a={toString:u=function(){throw i},valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=u));var f=Object.prototype.toString,p=Object.getOwnPropertyDescriptor;t.exports=c?function(t){if(!t||"object"!=typeof t)return!1;var e=p(t,"lastIndex");if(!e||!n(e,"value"))return!1;try{o(t,a)}catch(t){return t===i}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===f.call(t)}},function(t,e,r){"use strict";var n=r(9),o=r(0)("%TypeError%"),i=r(1),u=r(11),a=r(8);t.exports=function(t){if("Object"!==i(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(n(t,"enumerable")&&(e["[[Enumerable]]"]=u(t.enumerable)),n(t,"configurable")&&(e["[[Configurable]]"]=u(t.configurable)),n(t,"value")&&(e["[[Value]]"]=t.value),n(t,"writable")&&(e["[[Writable]]"]=u(t.writable)),n(t,"get")){var r=t.get;if(void 0!==r&&!a(r))throw new TypeError("getter must be a function");e["[[Get]]"]=r}if(n(t,"set")){var c=t.set;if(void 0!==c&&!a(c))throw new o("setter must be a function");e["[[Set]]"]=c}if((n(e,"[[Get]]")||n(e,"[[Set]]"))&&(n(e,"[[Value]]")||n(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}},function(t,e,r){"use strict";var n=r(9),o=r(22),i=r(1);t.exports=function(t){return void 0!==t&&(o(i,"Property Descriptor","Desc",t),!(!n(t,"[[Value]]")&&!n(t,"[[Writable]]")))}},function(t,e,r){"use strict";var n=r(0)("%Object%"),o=r(63),i=n.preventExtensions,u=n.isExtensible;t.exports=i?function(t){return!o(t)&&u(t)}:function(t){return!o(t)}},function(t,e,r){"use strict";t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=r(17);t.exports=function(t,e){return t===e?0!==t||1/t==1/e:n(t)&&n(e)}},function(t,e,r){"use strict";var n=r(0)("%String%"),o=r(66),i=r(71);t.exports=function(t){var e=o(t,n);return"symbol"==typeof e?e:i(e)}},function(t,e,r){"use strict";var n=r(67);t.exports=function(t,e){return 1<arguments.length?n(t,e):n(t)}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=r(68),i=r(21),u=r(69),a=r(70);t.exports=function(t,e){if(o(t))return t;var r,c="default";if(1<arguments.length&&(e===String?c="string":e===Number&&(c="number")),n&&(Symbol.toPrimitive?r=function(t,e){var r=t[e];if(null!=r){if(!i(r))throw new TypeError(r+" returned for property "+e+" of object "+t+" is not a function");return r}}(t,Symbol.toPrimitive):a(t)&&(r=Symbol.prototype.valueOf)),void 0===r)return"default"===c&&(u(t)||a(t))&&(c="string"),function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');for(var r,n,u="string"===e?["toString","valueOf"]:["valueOf","toString"],a=0;a<u.length;++a)if(r=t[u[a]],i(r)&&(n=r.call(t),o(n)))return n;throw new TypeError("No default value")}(t,"default"===c?"number":c);var f=r.call(t,c);if(o(f))return f;throw new TypeError("unable to convert exotic object to primitive")}},function(t,e,r){"use strict";t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=Date.prototype.getDay,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},function(t,e,r){"use strict";var n,o,i=Object.prototype.toString;r(5)()?(n=Symbol.prototype.toString,o=/^Symbol\(.*\)$/,t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==i.call(t))return!1;try{return"symbol"==typeof(e=t).valueOf()&&o.test(n.call(e))}catch(t){return!1}var e}):t.exports=function(){return!1}},function(t,e,r){"use strict";var n=r(0),o=n("%String%"),i=n("%TypeError%");t.exports=function(t){if("symbol"==typeof t)throw new i("Cannot convert a Symbol value to a string");return o(t)}},function(t,e,r){"use strict";var n=r(23),o=r(13);t.exports=function(){var t=n();return o(Object,{fromEntries:t},{fromEntries:function(){return Object.fromEntries!==t}}),t}}],e={},f.m=d,f.c=e,f.d=function(t,e,r){f.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},f.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(f.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)f.d(r,n,function(e){return t[e]}.bind(null,n));return r},f.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return f.d(e,"a",e),e},f.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},f.p="",f(f.s=24);function f(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return d[t].call(r.exports,r,r.exports,f),r.l=!0,r.exports}var d,e}));